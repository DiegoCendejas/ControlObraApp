<ion-header no-border *ngIf="!takingPhoto">
    <ion-toolbar color="light">
        <ion-buttons slot="start">
            <ion-back-button class="text-navy" text="regresar"></ion-back-button>
        </ion-buttons>
        <!--<ion-title>detalleObra</ion-title>-->
    </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <ion-grid [ngClass]="{'ion-padding-top':takingPhoto}">
        <ion-row>
            <ion-col size-xs="6" size-md="5" offset-md="1" size-lg="4" offset-lg="2">
                <img src="../../../assets/images/logotam.png">
            </ion-col>
        </ion-row>
        <ion-row class="ion-padding-top" *ngIf="!takingPhoto">
            <ion-col size-xs="12" size-md="10" offset-md="1" size-lg="8" offset-lg="2">
                <ion-list lines="none">
                    <ion-item class="item-box no-padding">
                        <ion-grid>
                            <ion-row>
                                <ion-col size="4" class="ion-text-start">
                                    <strong>{{obraData.No_Folio_Proyecto}}</strong>
                                </ion-col>
                                <ion-col size="8" class="ion-text-end text-blue">
                                    <strong>{{obraData.Contrato_No || '--------'}}</strong>
                                </ion-col>
                            </ion-row>
                            <ion-row>
                                <ion-col>
                                    <ion-label text-wrap>{{obraData.Nombre_Proyecto}}</ion-label>
                                </ion-col>
                            </ion-row>
                            <ion-row>
                                <ion-col class="ion-text-end">
                                    <ion-label>
                                        <strong class="in-line">&uacute;ltima supervisi&oacute;n:</strong> {{obraData.Fecha_Ultima_Visita.substring(0,7)+'20'+obraData.Fecha_Ultima_Visita.substring(7,9)}}
                                    </ion-label>
                                </ion-col>
                            </ion-row>
                        </ion-grid>
                    </ion-item>
                </ion-list>
            </ion-col>
        </ion-row>

        <ion-row *ngIf="!takingPhoto">
            <ion-col size-xs="6" size-md="5" offset-md="1" size-lg="4" offset-lg="2">
                <ion-button class="btn-blue" size="large" expand="block" (click)="takePicture()">Tomar fotos</ion-button>
            </ion-col>
            <ion-col size-xs="6" size-md="5" size-lg="4">
                <ion-button class="btn-green" size="large" expand="block" (click)="startVisit()">Iniciar Visita</ion-button>
            </ion-col>
        </ion-row>


        <ion-row *ngIf="!takingPhoto">
            <h3 class="ion-padding-top" *ngIf="pictures.length > 0" text-center>Imagenes pendientes de subir...</h3>
            <ion-list>
                <ion-item *ngFor="let img of pictures; index as pos" text-wrap>
                    <ion-thumbnail slot="start">
                        <ion-img [src]="img.path"></ion-img>
                    </ion-thumbnail>
                    <ion-label>
                        {{ img.name }}
                    </ion-label>
                    <ion-button slot="end" fill="clear">
                        <ion-icon slot="icon-only" name="cloud-upload"></ion-icon>
                    </ion-button>
                    <ion-button slot="end" fill="clear">
                        <ion-icon slot="icon-only" name="trash"></ion-icon>
                    </ion-button>
                </ion-item>
            </ion-list>
        </ion-row>



        <ion-row *ngIf="takingPhoto">
            <ion-col size-xs=" 12 " size-md="10 " offset-md="1 " size-lg="8 " offset-lg="2 ">
                <img [src]="sanitize(this.imageToUpload.path) " class="w-100 ">
            </ion-col>
        </ion-row>
        <ion-row *ngIf="takingPhoto">
            <ion-col size-xs="12 " size-md="10 " offset-md="1 " size-lg="8 " offset-lg="2 ">
                <ion-input type="text " placeholder="Comentarios opcionales " [(ngModel)]="comments " class="input-text ion-padding-start "></ion-input>
            </ion-col>
        </ion-row>

        <ion-row *ngIf="takingPhoto">
            <ion-col size-xs="5 " size-md="4 " offset-md="1 " size-lg="3 " offset-lg="2 ">
                <ion-button color="danger " expand="block " (click)="clearValues() ">cancelar</ion-button>
            </ion-col>
            <ion-col size-xs="5 " offset-xs="2 " size-md="4 " offset-md="2 " size-lg="3 " offset-lg="2 ">
                <ion-button class="btn-green " expand="block " (click)="startUpload() ">guardar foto</ion-button>
            </ion-col>
        </ion-row>

    </ion-grid>

</ion-content>